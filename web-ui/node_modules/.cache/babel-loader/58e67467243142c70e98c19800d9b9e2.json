{"ast":null,"code":"import _objectSpread from\"/home/sring/BC-15/devops-bootcamp-jan22/BC15-green-commute/web-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/sring/BC-15/devops-bootcamp-jan22/BC15-green-commute/web-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Grid,makeStyles,Snackbar}from\"@material-ui/core\";import React,{useEffect,useState}from\"react\";import JobList from\"../../organisms/JobList/JobList\";import Navbar from\"../../organisms/Navbar/Navbar\";import{connect}from\"react-redux\";import{convertServiceToClientJob,convertServiceToClientJobs}from\"../../../state/converter/jobConverter\";import{apis}from\"../../../utils/resources/resources\";import{SavedJobsDispatch}from\"../../../utils/utils/utils\";import JobDetails from\"../../organisms/JobDetails/JobDetails\";import TopHeader from\"../../molecules/TopHeader/TopHeader\";import JobCommuteRoutes from\"../../organisms/JobCommuteRoutes\";import{Alert}from\"@material-ui/lab\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{display:\"flex\",alignItems:\"flex-start\",overflow:\"none\"},topHeader:{marginTop:theme.spacing(4),marginBottom:theme.spacing(4)},findJobs:{marginTop:theme.spacing(10)},right:{boxSizing:\"border-box\"}};});var SavedJobs=function SavedJobs(props){var classes=useStyles();var url=new URL(apis.GET_SAVEDJOBS);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isPrimaryJobList=_useState2[0],setPrimaryJobList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isGreenCommuteClicked=_useState4[0],setGreenCommuteClicked=_useState4[1];var _useState5=useState(\"Message\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(\"success\"),_useState8=_slicedToArray(_useState7,2),messageType=_useState8[0],setMessageType=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showMessage=_useState10[0],setShowMessage=_useState10[1];var handleSearch=function handleSearch(){fetch(url).then(function(res){return res.json();}).then(function(res){return props.fetchSavedJobs(convertServiceToClientJobs(res));}).catch(function(e){return console.log(e);});};var jobUrl=new URL(apis.GET_JOBS);var onJobCardClick=function onJobCardClick(obj){fetch(jobUrl+obj.jobId).then(function(res){return res.json();}).then(function(res){props.fetchJob(convertServiceToClientJob(res));setPrimaryJobList(false);setGreenCommuteClicked(false);}).catch(function(e){return console.log(e);});};var greenCommuteClick=function greenCommuteClick(){setGreenCommuteClicked(true);};var onBackClick=function onBackClick(){setGreenCommuteClicked(false);};var reducerSavedJobs=props.savedJobs;var anyItemRemoved=false;var handleRemoved=function handleRemoved(JobId){var newSavedJobs=reducerSavedJobs.filter(function(item){return JobId!==item.jobId;});setMessage(\"Job removed from saved jobs.\");props.fetchSavedJobs(newSavedJobs);setMessageType(\"success\");setPrimaryJobList(true);setShowMessage(true);anyItemRemoved=true;};useEffect(function(){if(anyItemRemoved===false){handleSearch();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.root,\"data-testid\":\"saved-jobs\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:2,children:/*#__PURE__*/_jsx(Navbar,{})}),/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:10,className:classes.right,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,className:classes.topHeader,children:/*#__PURE__*/_jsx(TopHeader,{locationLabel:props.userLocation,profileName:\"Bob Joseph\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:12,children:[/*#__PURE__*/_jsx(JobList,{isPrimary:isPrimaryJobList,jobs:reducerSavedJobs,onSearchCLick:handleSearch,onJobCardClick:onJobCardClick,showFindJobs:false}),isPrimaryJobList?\"\":isGreenCommuteClicked?/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(JobCommuteRoutes,_objectSpread(_objectSpread({selectedCommute:\"metro\"},props.draftJob),{},{from:props.userLocation,to:props.jobLocation,commuteTypes:props.metroOptions,cabOptions:props.cabOptions,onBackClick:onBackClick,showFindJobs:false,itemsRemoved:function itemsRemoved(id){return handleRemoved(id);}}))}):/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(JobDetails,_objectSpread({showFindJobs:false,onGreenCommuteClick:greenCommuteClick,itemsRemoved:function itemsRemoved(id){return handleRemoved(id);}},props.draftJob))})]})]}),/*#__PURE__*/_jsx(Snackbar,{autoHideDuration:3000,open:showMessage,onClose:function onClose(){setShowMessage(false);},anchorOrigin:{vertical:'top',horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{elevation:6,severity:messageType,variant:\"filled\",children:message})})]});};var mapStateToProps=function mapStateToProps(state){return{savedJobs:state.savedJobs,draftJob:state.draftJob,userLocation:state.userLocation,cabOptions:state.cabOptions,metroOptions:state.metroOptions};};SavedJobsDispatch();export default connect(mapStateToProps,SavedJobsDispatch)(SavedJobs);","map":{"version":3,"sources":["/home/sring/BC-15/devops-bootcamp-jan22/BC15-green-commute/web-ui/src/components/pages/SavedJobsPage/SavedJobs.js"],"names":["Grid","makeStyles","Snackbar","React","useEffect","useState","JobList","Navbar","connect","convertServiceToClientJob","convertServiceToClientJobs","apis","SavedJobsDispatch","JobDetails","TopHeader","JobCommuteRoutes","Alert","useStyles","theme","root","display","alignItems","overflow","topHeader","marginTop","spacing","marginBottom","findJobs","right","boxSizing","SavedJobs","props","classes","url","URL","GET_SAVEDJOBS","isPrimaryJobList","setPrimaryJobList","isGreenCommuteClicked","setGreenCommuteClicked","message","setMessage","messageType","setMessageType","showMessage","setShowMessage","handleSearch","fetch","then","res","json","fetchSavedJobs","catch","e","console","log","jobUrl","GET_JOBS","onJobCardClick","obj","jobId","fetchJob","greenCommuteClick","onBackClick","reducerSavedJobs","savedJobs","anyItemRemoved","handleRemoved","JobId","newSavedJobs","filter","item","userLocation","draftJob","jobLocation","metroOptions","cabOptions","id","vertical","horizontal","mapStateToProps","state"],"mappings":"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","sourcesContent":["import {Grid, makeStyles, Snackbar} from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport JobList from \"../../organisms/JobList/JobList\";\nimport Navbar from \"../../organisms/Navbar/Navbar\";\nimport { connect } from \"react-redux\";\nimport {\n  convertServiceToClientJob,\n  convertServiceToClientJobs,\n} from \"../../../state/converter/jobConverter\";\nimport { apis,} from \"../../../utils/resources/resources\";\nimport { SavedJobsDispatch } from \"../../../utils/utils/utils\";\nimport JobDetails from \"../../organisms/JobDetails/JobDetails\";\nimport TopHeader from \"../../molecules/TopHeader/TopHeader\";\nimport JobCommuteRoutes from \"../../organisms/JobCommuteRoutes\";\nimport {Alert} from \"@material-ui/lab\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    overflow: \"none\",\n  },\n  topHeader: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(4),\n  },\n  findJobs: {\n    marginTop: theme.spacing(10),\n  },\n  right: {\n    boxSizing: \"border-box\",\n  },\n}));\nconst SavedJobs = (props) => {\n  const classes = useStyles();\n  const url = new URL(apis.GET_SAVEDJOBS);\n  const [isPrimaryJobList, setPrimaryJobList] = useState(true);\n  const [isGreenCommuteClicked, setGreenCommuteClicked] = useState(false);\n  const [message, setMessage] = useState(\"Message\");\n  const [messageType, setMessageType] = useState(\"success\");\n  const [showMessage, setShowMessage] = useState(false);\n  const handleSearch = () => {\n    fetch(url)\n      .then((res) => res.json())\n      .then((res) => props.fetchSavedJobs(convertServiceToClientJobs(res)))\n      .catch((e) => console.log(e));\n  };\n  const jobUrl = new URL(apis.GET_JOBS);\n  const onJobCardClick = (obj) => {\n    fetch(jobUrl + obj.jobId)\n      .then((res) => res.json())\n      .then((res) => {\n        props.fetchJob(convertServiceToClientJob(res));\n        setPrimaryJobList(false);\n        setGreenCommuteClicked(false);\n      })\n      .catch((e) => console.log(e));\n  };\n \n  const greenCommuteClick = () => {\n    setGreenCommuteClicked(true);\n  };\n  const onBackClick = () => {\n    setGreenCommuteClicked(false);\n  };\n  const reducerSavedJobs = props.savedJobs;\n  let anyItemRemoved = false;\n  const handleRemoved = (JobId) => {\n    const newSavedJobs = reducerSavedJobs.filter((item) => JobId !== item.jobId);\n    setMessage(\"Job removed from saved jobs.\");\n    props.fetchSavedJobs(newSavedJobs);\n    setMessageType(\"success\");\n    setPrimaryJobList(true);\n    setShowMessage(true);\n    anyItemRemoved = true;\n  };\n  useEffect(() => {\n    if(anyItemRemoved === false) {\n      handleSearch();\n    }    \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (\n    <Grid container className={classes.root} data-testid=\"saved-jobs\">\n      <Grid item xs={2}>\n        <Navbar />\n      </Grid>\n      <Grid container item xs={10} className={classes.right}>\n        <Grid item xs={12} className={classes.topHeader}>\n          <TopHeader\n            locationLabel={props.userLocation}\n            profileName=\"Bob Joseph\"\n          />\n        </Grid>\n        <Grid item container xs={12}>\n          <JobList\n            isPrimary={isPrimaryJobList}\n            jobs={reducerSavedJobs}\n            onSearchCLick={handleSearch}\n            onJobCardClick={onJobCardClick}\n            showFindJobs={false}\n          />\n          {isPrimaryJobList ? (\n            \"\"\n          ) : isGreenCommuteClicked ? (\n            <Grid item> \n              <JobCommuteRoutes\n                selectedCommute=\"metro\"\n                {...props.draftJob}\n                from={props.userLocation}\n                to={props.jobLocation}\n                commuteTypes={props.metroOptions}\n                cabOptions={props.cabOptions}\n                onBackClick={onBackClick}\n                showFindJobs={false}\n                itemsRemoved={ (id) => handleRemoved(id)}\n              />\n            </Grid>\n          ) : (\n            <Grid item>\n              <JobDetails\n                showFindJobs={false}\n                onGreenCommuteClick={greenCommuteClick}\n                itemsRemoved={ (id) => handleRemoved(id)}\n                {...props.draftJob}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </Grid>\n      <Snackbar\n          autoHideDuration={3000}\n          open={showMessage}\n          onClose={()=> {setShowMessage(false);}}\n          anchorOrigin={{vertical: 'top', horizontal: 'center'}}\n      >\n        <Alert elevation={6} severity={messageType} variant=\"filled\">\n          {message}\n        </Alert>\n      </Snackbar>\n    </Grid>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    savedJobs: state.savedJobs,\n    draftJob: state.draftJob,\n    userLocation: state.userLocation,\n    cabOptions: state.cabOptions,\n    metroOptions: state.metroOptions,\n  };\n};\n\nSavedJobsDispatch();\n\nexport default connect(mapStateToProps, SavedJobsDispatch)(SavedJobs);\n"]},"metadata":{},"sourceType":"module"}