{"ast":null,"code":"import _objectSpread from\"/home/sring/BC-15/devops-bootcamp-jan22/BC15-green-commute/web-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/sring/BC-15/devops-bootcamp-jan22/BC15-green-commute/web-ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/sring/BC-15/devops-bootcamp-jan22/BC15-green-commute/web-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import CloseIcon from\"@material-ui/icons/Close\";import{Grid}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core\";import Paper from\"@material-ui/core/Paper\";import FilterType from\"../FilterType\";import Button from\"../../atoms/button/Button\";import{connect}from\"react-redux\";import{chipAndFilterGroupDispatch,getFilterGroupChecked,getFilterGroupClearAll,landingPageLocationAndSkillParams}from\"../../../utils/utils/utils\";import{apis}from\"../../../utils/resources/resources\";import{convertServiceToClientJobs}from\"../../../state/converter/jobConverter\";import{points}from\"../../../utils/constants/constant\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{closeIcon:{color:theme.palette.secondary.main,textAlign:\"right\",paddingTop:10,paddingRight:10,marginBottom:-10},filterType:{marginBottom:40},closeIconSize:{fontSize:20,marginRight:-20},paperStyle:{width:580,borderRadius:10,border:\"none\"},filterTypes:{display:\"flex\",flexWrap:\"wrap\",paddingLeft:50},buttons:{marginLeft:-35,marginBottom:20}};});var FilterGroup=function FilterGroup(props){var filterValues=props.filterValues;var classes=useStyles();var _useState=useState(props.Filters),_useState2=_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];var handleChange=function handleChange(checkValue,label){var jobFilters=_toConsumableArray(filters);var arrayOfJobFilters=getFilterGroupChecked(jobFilters,label);setFilters(arrayOfJobFilters);};var clearAllFilters=function clearAllFilters(){var jobFilters=_toConsumableArray(filters);var arrayOfJobFilters=getFilterGroupClearAll(jobFilters);setFilters(arrayOfJobFilters);};var FilterTypes=filterValues.map(function(input){return/*#__PURE__*/_jsx(Grid,{item:true,xs:4,className:classes.filterType,children:/*#__PURE__*/_jsx(FilterType,{heading:input.heading,labels:input.labels,handleChange:handleChange,filters:props.Filters})});});var maxDistance=function maxDistance(){var distArray=[];for(var i=0;i<4;i++){if(props.Filters[i].checked){distArray=props.Filters[i].label.split(\"-\");}}return(10+Number(distArray[0]))*1000;};var jobType=function jobType(){var distArray=\"\";for(var i=9;i<=12;i++){if(props.Filters[i].checked){distArray=props.Filters[i].label;}}distArray=distArray.replace(\" \",\"_\");return distArray.toUpperCase();};var experienceLevel=function experienceLevel(){var distArray=\"\";for(var i=13;i<=16;i++){if(props.Filters[i].checked){distArray=props.Filters[i].label;}}distArray=distArray.replace(\"-\",\"_\");return distArray.toUpperCase();};var params={};var initialJobLocation=[];var finalJobLocation=\"\";var parameters=landingPageLocationAndSkillParams(params,initialJobLocation,finalJobLocation,props.jobLocation,props.skill,points);params=_objectSpread({},parameters);if(maxDistance()){params=_objectSpread(_objectSpread({},params),{},{distance:maxDistance()});}if(jobType()){params=_objectSpread(_objectSpread({},params),{},{job_type:jobType()});}if(experienceLevel()){params=_objectSpread(_objectSpread({},params),{},{experience_level:experienceLevel()});}var fetchJobsUrl=new URL(apis.GET_JOBS);var handleSearch=function handleSearch(){Object.keys(params).forEach(function(key){return fetchJobsUrl.searchParams.append(key,params[key]);});fetch(fetchJobsUrl).then(function(res){return res.json();}).then(function(res){return props.fetchJobs(convertServiceToClientJobs(res));}).catch(function(e){return console.log(e);});};var ApplyFilter=function ApplyFilter(){props.getFilters(filters);props.handleClose();params.lon?params=_objectSpread(_objectSpread({},params),{},{lon:params.lon,lat:params.lat,is_green_commute:props.filters[4].checked}):params=_objectSpread(_objectSpread({},params),{},{is_green_commute:props.filters[4].checked});props.skill[0]?params=_objectSpread(_objectSpread({},params),{},{skill:props.skill[0],is_green_commute:props.filters[4].checked}):params=_objectSpread(_objectSpread({},params),{},{is_green_commute:props.filters[4].checked});handleSearch();};var ClearFilter=function ClearFilter(){clearAllFilters();props.handleClose();props.getFilters(filters);params.lon?params={lon:params.lon,lat:params.lat,is_green_commute:false}:params={is_green_commute:false};props.skill[0]?params=_objectSpread(_objectSpread({},params),{},{skill:props.skill[0],is_green_commute:false}):params=_objectSpread(_objectSpread({},params),{},{is_green_commute:false});handleSearch();};useEffect(function(){handleSearch();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",className:classes.paperStyle,\"data-testid\":\"filter-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:classes.closeIcon,children:/*#__PURE__*/_jsx(CloseIcon,{className:classes.closeIconSize,onClick:props.handleListItemClick})}),/*#__PURE__*/_jsx(Grid,{container:true,className:classes.filterTypes,direction:\"row\",spacing:4,children:FilterTypes}),/*#__PURE__*/_jsxs(Grid,{container:true,justify:\"flex-end\",spacing:3,className:classes.buttons,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{label:\"Clear all\",type:\"small\",onClick:ClearFilter})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{label:\"Apply\",onClick:ApplyFilter,type:\"small\",variant:\"contained\"})})]})]});};var mapStateToProps=function mapStateToProps(state){return{Filters:state.filters,jobLocation:state.jobLocation,userLocation:state.userLocation,skill:state.skills,filters:state.filters,draftJob:state.draftJob,cabOptions:state.cabOptions,metroOptions:state.metroOptions};};chipAndFilterGroupDispatch();export default connect(mapStateToProps,chipAndFilterGroupDispatch)(FilterGroup);","map":{"version":3,"sources":["/home/sring/BC-15/devops-bootcamp-jan22/BC15-green-commute/web-ui/src/components/organisms/FilterGroup/index.js"],"names":["React","useState","useEffect","CloseIcon","Grid","makeStyles","Paper","FilterType","Button","connect","chipAndFilterGroupDispatch","getFilterGroupChecked","getFilterGroupClearAll","landingPageLocationAndSkillParams","apis","convertServiceToClientJobs","points","useStyles","theme","closeIcon","color","palette","secondary","main","textAlign","paddingTop","paddingRight","marginBottom","filterType","closeIconSize","fontSize","marginRight","paperStyle","width","borderRadius","border","filterTypes","display","flexWrap","paddingLeft","buttons","marginLeft","FilterGroup","props","filterValues","classes","Filters","filters","setFilters","handleChange","checkValue","label","jobFilters","arrayOfJobFilters","clearAllFilters","FilterTypes","map","input","heading","labels","maxDistance","distArray","i","checked","split","Number","jobType","replace","toUpperCase","experienceLevel","params","initialJobLocation","finalJobLocation","parameters","jobLocation","skill","distance","job_type","experience_level","fetchJobsUrl","URL","GET_JOBS","handleSearch","Object","keys","forEach","key","searchParams","append","fetch","then","res","json","fetchJobs","catch","e","console","log","ApplyFilter","getFilters","handleClose","lon","lat","is_green_commute","ClearFilter","handleListItemClick","mapStateToProps","state","userLocation","skills","draftJob","cabOptions","metroOptions"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core\";\nimport Paper from \"@material-ui/core/Paper\";\nimport FilterType from \"../FilterType\";\nimport Button from \"../../atoms/button/Button\";\nimport { connect } from \"react-redux\";\nimport {\n  chipAndFilterGroupDispatch,\n  getFilterGroupChecked,\n  getFilterGroupClearAll,\n  landingPageLocationAndSkillParams,\n} from \"../../../utils/utils/utils\";\nimport { apis } from \"../../../utils/resources/resources\";\nimport { convertServiceToClientJobs } from \"../../../state/converter/jobConverter\";\nimport { points } from \"../../../utils/constants/constant\";\n\nconst useStyles = makeStyles((theme) => ({\n  closeIcon: {\n    color: theme.palette.secondary.main,\n    textAlign: \"right\",\n    paddingTop: 10,\n    paddingRight: 10,\n    marginBottom: -10,\n  },\n  filterType: {\n    marginBottom: 40,\n  },\n  closeIconSize: {\n    fontSize: 20,\n    marginRight: -20,\n  },\n  paperStyle: {\n    width: 580,\n    borderRadius: 10,\n    border: \"none\",\n  },\n  filterTypes: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    paddingLeft: 50,\n  },\n  buttons: {\n    marginLeft: -35,\n    marginBottom: 20,\n  },\n}));\n\nconst FilterGroup = (props) => {\n  const { filterValues } = props;\n  const classes = useStyles();\n  const [filters, setFilters] = useState(props.Filters);\n  const handleChange = (checkValue, label) => {\n    const jobFilters = [...filters];\n    const arrayOfJobFilters = getFilterGroupChecked(jobFilters, label);\n    setFilters(arrayOfJobFilters);\n  };\n\n  const clearAllFilters = () => {\n    const jobFilters = [...filters];\n    const arrayOfJobFilters = getFilterGroupClearAll(jobFilters);\n    setFilters(arrayOfJobFilters);\n  };\n\n  const FilterTypes = filterValues.map((input) => {\n    return (\n      <Grid item xs={4} className={classes.filterType}>\n        <FilterType\n          heading={input.heading}\n          labels={input.labels}\n          handleChange={handleChange}\n          filters={props.Filters}\n        />\n      </Grid>\n    );\n  });\n  const maxDistance = () => {\n    let distArray = [];\n    for (let i = 0; i < 4; i++) {\n      if (props.Filters[i].checked) {\n        distArray = props.Filters[i].label.split(\"-\");\n      }\n    }\n    return (10 + Number(distArray[0])) * 1000;\n  };\n  const jobType = () => {\n    let distArray = \"\";\n    for (let i = 9; i <= 12; i++) {\n      if (props.Filters[i].checked) {\n        distArray = props.Filters[i].label;\n      }\n    }\n    distArray = distArray.replace(\" \", \"_\");\n    return distArray.toUpperCase();\n  };\n  const experienceLevel = () => {\n    let distArray = \"\";\n    for (let i = 13; i <= 16; i++) {\n      if (props.Filters[i].checked) {\n        distArray = props.Filters[i].label;\n      }\n    }\n    distArray = distArray.replace(\"-\", \"_\");\n    return distArray.toUpperCase();\n  };\n  let params = {};\n  const initialJobLocation = [];\n  const finalJobLocation = \"\";\n  const parameters = landingPageLocationAndSkillParams(\n    params,\n    initialJobLocation,\n    finalJobLocation,\n    props.jobLocation,\n    props.skill,\n    points\n  );\n  params = {...parameters};\n  if (maxDistance()) {\n    params = { ...params, distance: maxDistance() };\n  }\n  if (jobType()) {\n    params = { ...params, job_type: jobType() };\n  }\n\n  if (experienceLevel()) {\n    params = { ...params, experience_level: experienceLevel() };\n  }\n  const fetchJobsUrl = new URL(apis.GET_JOBS);\n  const handleSearch = () => {\n    Object.keys(params).forEach((key) =>\n      fetchJobsUrl.searchParams.append(key, params[key])\n    );\n    fetch(fetchJobsUrl)\n      .then((res) => res.json())\n      .then((res) => props.fetchJobs(convertServiceToClientJobs(res)))\n      .catch((e) => console.log(e));\n  };\n\n  const ApplyFilter = () => {\n    props.getFilters(filters);\n    props.handleClose();\n    params.lon\n      ? (params = {\n          ...params,\n          lon: params.lon,\n          lat: params.lat,\n          is_green_commute: props.filters[4].checked,\n        })\n      : (params = { ...params, is_green_commute: props.filters[4].checked });\n    props.skill[0]\n      ? (params = {\n          ...params,\n          skill: props.skill[0],\n          is_green_commute: props.filters[4].checked,\n        })\n      : (params = { ...params, is_green_commute: props.filters[4].checked });\n    handleSearch();\n  };\n\n  const ClearFilter = () => {\n    clearAllFilters();\n    props.handleClose();\n    props.getFilters(filters);\n    params.lon\n      ? (params = { lon: params.lon, lat: params.lat, is_green_commute: false })\n      : (params = { is_green_commute: false });\n      props.skill[0]\n      ? (params = { ...params, skill: props.skill[0], is_green_commute: false })\n      : (params = { ...params, is_green_commute: false });\n    handleSearch();\n  };\n\n  useEffect(() => {\n    handleSearch();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (\n    <Paper\n      variant=\"outlined\"\n      className={classes.paperStyle}\n      data-testid=\"filter-group\"\n    >\n      <div className={classes.closeIcon}>\n        <CloseIcon\n          className={classes.closeIconSize}\n          onClick={props.handleListItemClick}\n        ></CloseIcon>\n      </div>\n      <Grid\n        container\n        className={classes.filterTypes}\n        direction=\"row\"\n        spacing={4}\n      >\n        {FilterTypes}\n      </Grid>\n      <Grid\n        container\n        justify=\"flex-end\"\n        spacing={3}\n        className={classes.buttons}\n      >\n        <Grid item>\n          <Button label=\"Clear all\" type=\"small\" onClick={ClearFilter}></Button>\n        </Grid>\n        <Grid item>\n          <Button\n            label=\"Apply\"\n            onClick={ApplyFilter}\n            type=\"small\"\n            variant=\"contained\"\n          ></Button>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    Filters: state.filters,\n    jobLocation: state.jobLocation,\n    userLocation: state.userLocation,\n    skill: state.skills,\n    filters: state.filters,\n    draftJob: state.draftJob,\n    cabOptions: state.cabOptions,\n    metroOptions: state.metroOptions,\n  };\n};\n\nchipAndFilterGroupDispatch();\n\nexport default connect(\n  mapStateToProps,\n  chipAndFilterGroupDispatch\n)(FilterGroup);\n"]},"metadata":{},"sourceType":"module"}